var ApplicationConfiguration=function(){"use strict";var a="freelancemanager",b=["ngRoute","ngAnimate","ngStorage","ngCookies","ui.bootstrap","ui.router","ui.utils","oc.lazyLoad","cfp.loadingBar","ngSanitize","ngResource","ngTable"],c=function(b){var c=angular.module(b,[]);return angular.module(a).requires.push(b),c},d=function(){var a=arguments;return{deps:["$ocLazyLoad","$q",function(b,c){function d(a){return e.then("function"==typeof a?a:function(){return b.load(a)})}for(var e=c.when(1),f=0,g=a.length;g>f;f++)e=d(a[f]);return e}]}};return{applicationModuleName:a,applicationModuleVendorDependencies:b,registerModule:c,resolve:d}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function(a){a.hashPrefix("!")}]),angular.element(document).ready(function(){angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("account"),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("crm"),ApplicationConfiguration.registerModule("invoice"),ApplicationConfiguration.registerModule("project"),ApplicationConfiguration.registerModule("settings"),ApplicationConfiguration.registerModule("time"),angular.module("account",["angular-jwt"]).factory("authInterceptor",["$rootScope","$q","$window",function(a,b,c){"use strict";return{request:function(a){return a.headers=a.headers||{},c.localStorage.token&&(a.headers.Authorization="Bearer "+c.localStorage.token),a},response:function(a){return a||b.when(a)}}}]).config(["$httpProvider",function(a){"use strict";a.interceptors.push("authInterceptor")}]).run(["$rootScope","$location","$window","jwtHelper",function(a,b,c,d){"use strict";a.$on("$stateChangeStart",function(a,e){var f=c.localStorage.token&&!d.isTokenExpired(c.localStorage.token);e.access&&e.access.requiredLogin&&!f&&b.path("/login")})}]),angular.module("account").config(["$stateProvider",function(a){"use strict";a.state("login",{url:"/login",templateUrl:"modules/account/views/login.html"}).state("app.account",{url:"/account",templateUrl:"modules/account/views/account.html",access:{requiredLogin:!0}})}]),angular.module("account").controller("AccountInfoController",["$scope","$window","jwtHelper","Account",function(a,b,c,d){"use strict";var e=c.decodeToken(b.localStorage.token);a.account=d.get({id:e.id}),a.save=function(){d.save(e.id,a.account)}}]),angular.module("account").controller("AccountPasswordController",["$scope","$window","jwtHelper","Account",function(a,b,c,d){"use strict";var e=c.decodeToken(b.localStorage.token);a.oldPassword="",a.newPassword="",a.newPasswordConfirm="",a.save=function(){a.isSaving=!0,a.hasError=!1,d.changePassword({id:e.id},{oldPassword:a.oldPassword,newPassword:a.newPassword},function(){a.isSaving=!1,a.oldPassword="",a.newPassword="",a.newPasswordConfirm="",a.accountPasswordForm.$setPristine()},function(){a.isSaving=!1,a.hasError=!0})}}]),angular.module("account").controller("AuthenticateController",["$rootScope","$scope","$http","$window","$location","jwtHelper",function(a,b,c,d,e,f){"use strict";delete d.localStorage.token,delete d.localStorage.user,b.user={email:"",password:""},b.error="",b.submit=function(){c.post("/security/authenticate",b.user).success(function(a){var b=f.decodeToken(a.token);d.localStorage.user=b.fullName,d.localStorage.token=a.token,e.path("/")}).error(function(){delete d.localStorage.token,delete d.localStorage.user,b.error="Invalid email or password"})}}]),angular.module("core").config(["cfpLoadingBarProvider",function(a){"use strict";a.includeBar=!0,a.includeSpinner=!1,a.latencyThreshold=500,a.parentSelector=".wrapper > section"}]).controller("NullController",function(){}).run(["$rootScope","$state","$stateParams","$window","$templateCache",function(a,b,c,d){"use strict";a.$state=b,a.$stateParams=c,a.$storage=d.localStorage,a.app={name:"Freelance Manager",description:"A demo application in NodeJS",author:"Kevin Cornelis",year:(new Date).getFullYear(),layout:{isFixed:!0,isCollapsed:!1,isBoxed:!1,isRTL:!1},viewAnimation:"ng-fadeInUp"}}]),angular.module("core").constant("const_mediaquery",{desktopLG:1200,desktop:992,tablet:768,mobile:480}),angular.module("core").config(["$stateProvider","$urlRouterProvider",function(a,b){"use strict";b.otherwise("/app/dashboard"),a.state("app",{url:"/app","abstract":!0,templateUrl:"modules/core/views/app.html",controller:"AppController",access:{requiredLogin:!0}}).state("app.dashboard",{url:"/dashboard",title:"Dashboard",templateUrl:"modules/core/views/dashboard.html",access:{requiredLogin:!0}})}]),angular.module("core").controller("AppController",["$rootScope","$scope","$state","$window","$localStorage","$timeout","toggleStateService","cfpLoadingBar",function(a,b,c,d,e,f,g,h){"use strict";a.$on("$stateChangeStart",function(){$(".wrapper > section").length&&h.start()}),a.$on("$stateChangeSuccess",function(a){a.targetScope.$watch("$viewContentLoaded",function(){h.complete()})}),a.$on("$stateNotFound",function(a,b){console.log(b.to),console.log(b.toParams),console.log(b.options)}),a.$on("$stateChangeError",function(a,b,c,d,e,f){console.log(f)}),a.$on("$stateChangeSuccess",function(){d.scrollTo(0,0),a.currTitle=c.current.title}),a.currTitle=c.current.title,a.pageTitle=function(){return a.app.name+" - "+(a.currTitle||a.app.description)},a.$watch("app.layout.isCollapsed",function(b){b===!1&&a.$broadcast("closeSidebarMenu")}),angular.isDefined(e.layout)?b.app.layout=e.layout:e.layout=b.app.layout,a.$watch("app.layout",function(){e.layout=b.app.layout},!0),b.toggleUserBlock=function(){b.$broadcast("toggleUserBlock")},g.restoreState($(document.body)),f(function(){a.mainViewAnimation=a.app.viewAnimation}),a.cancel=function(a){a.stopPropagation()}}]),angular.module("core").controller("SidebarController",["$rootScope","$scope","$state","$location","$http","$timeout","const_mediaquery",function(a,b,c,d,e,f,g){"use strict";function h(a){a+="";for(var b in o)(0>a||a.indexOf(b)<0)&&(o[b]=!0)}function i(){return l.width()<g.tablet}function j(){return m.hasClass("aside-collapsed")}var k=a.$state.current.name,l=$(window),m=($("html"),$("body"));a.$on("$stateChangeStart",function(b,c){k=c.name,$("body.aside-toggled").removeClass("aside-toggled"),a.$broadcast("closeSidebarMenu")}),l.on("resize",function(){m.removeClass(i()?"aside-collapsed":"aside-toggled")});var n=function(a){if(a){if(a.sref&&"#"!==a.sref)return c.is(a.sref)||c.includes(a.sref);var b=!1;return angular.forEach(a.submenu,function(a){n(a)&&(b=!0)}),b}};b.getMenuItemPropClasses=function(a){return(a.heading?"nav-heading":"")+(n(a)?" active":"")},b.loadSidebarMenu=function(){var b="settings/sidebar-menu.json",c=b+"?v="+(new Date).getTime();e.get(c).success(function(b){a.menuItems=b}).error(function(){alert("Failure loading menu")})},b.loadSidebarMenu();var o=[];b.addCollapse=function(a,b){o[a]=!n(b)},b.isCollapse=function(a){return o[a]},b.toggleCollapse=function(a,b){return j()&&!i()?!0:(angular.isDefined(o[a])?(o[a]=!o[a],h(a)):b&&h(-1),!0)}}]),angular.module("core").directive("fmAddErrorFor",function(){"use strict";return{link:function(a,b,c){a.$watch(c.fmAddErrorFor,function(d){a.$watch(c.fmAddErrorFor+".$invalid",function(){d.$touched&&d.$invalid&&!d.$pristine?b.addClass("has-error"):b.removeClass("has-error")}),a.$watch(c.fmAddErrorFor+".$touched",function(){d.$touched&&d.$invalid&&!d.$pristine?b.addClass("has-error"):b.removeClass("has-error")})})}}}),angular.module("core").directive("autofocus",["$timeout",function(a){"use strict";return{link:function(b,c){a(function(){c[0].focus()},100)}}}]),angular.module("core").directive("fmClockpicker",function(){"use strict";return{restrict:"A",link:function(a,b){b.clockpicker()}}}),angular.module("core").directive("fmDatepicker",["$timeout",function(){"use strict";return{restrict:"A",require:"?ngModel",scope:{fmDatepickerDatechanged:"&"},link:function(a,b,c){var d=c.fmDatepickerHPosition||"right";b.datepicker({format:c.fmDatepickerFormat||"yyyy-mm-dd",autoclose:!0,orientation:"auto "+d,todayBtn:"linked"}).on("changeDate",function(b){var d=b.format(c.fmDatepickerFormat||"yyyy-mm-dd");a.fmDatepickerDatechanged&&a.$apply(function(){a.fmDatepickerDatechanged({date:d})})})}}}]),angular.module("core").directive("fmDynamic",["$compile",function(a){"use strict";return{restrict:"A",replace:!0,link:function(b,c,d){b.$watch(d.fmDynamic,function(e){c.html("<div data-fm-with='"+d.fmDynamicBind+"'>"+e+"</div>"),a(c.contents())(b)})}}}]),angular.module("core").directive("href",function(){"use strict";return{restrict:"A",compile:function(a,b){return function(a,c){(b.ngClick||""===b.href||"#"===b.href)&&(c.hasClass("dropdown-toggle")||c.on("click",function(a){a.preventDefault(),a.stopPropagation()}))}}}}),angular.module("core").directive("fmIframe",["$compile",function(a){"use strict";return{restrict:"A",link:function(b,c,d){b.$watch(d.fmIframe,function(e){var f=a(angular.element("<div data-fm-with='"+d.fmIframeBind+"'>"+e+"</div>"))(b);$(c[0].contentDocument.body).html(f)})}}}]),angular.module("core").directive("fmMatch",["$parse",function(a){"use strict";return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){function f(){var a=g(b);return angular.isObject(a)&&a.hasOwnProperty("$viewValue")&&(a=a.$viewValue),a}if(!e)return void(console&&console.warn&&console.warn("Match validation requires ngModel to be on the element"));var g=a(d.fmMatch);b.$watch(f,function(){e.$validate()}),e.$validators.match=function(){return e.$viewValue===f()}}}}]),angular.module("core").directive("now",["dateFilter","$interval",function(a,b){"use strict";return{restrict:"E",link:function(c,d,e){function f(){var b=a(new Date,g);d.text(b)}var g=e.format;f(),b(f,1e3)}}}]),angular.module("core").directive("piechart",function(){"use strict";return{restrict:"E",link:function(a,b,c){var d=null,e={series:{pie:{show:!0,radius:1,label:{show:!0,radius:2/3,formatter:function(a,b){return'<div style="font-size:8pt; text-align:center; padding:2px; color:white;">'+a+"<br/>"+Math.round(b.percent)+"%</div>"},threshold:.1}}},legend:{show:!1}};a.$watch(c.ngModel,function(a){d?(d.setData(a),d.setupGrid(),d.draw()):a&&(d=$.plot(b,a,e),b.show())})}}}),angular.module("core").directive("searchOpen",["navSearch",function(a){"use strict";return{restrict:"A",controller:["$scope","$element",function(b,c){c.on("click",function(a){a.stopPropagation()}).on("click",a.toggle)}]}}]).directive("searchDismiss",["navSearch",function(a){"use strict";var b='.navbar-form input[type="text"]';return{restrict:"A",controller:["$scope","$element",function(c,d){$(b).on("click",function(a){a.stopPropagation()}).on("keyup",function(b){27===b.keyCode&&a.dismiss()}),$(document).on("click",a.dismiss),d.on("click",function(a){a.stopPropagation()}).on("click",a.dismiss)}]}}]),angular.module("core").directive("sidebar",["$window","const_mediaquery",function(a,b){"use strict";function c(a){a.siblings("li").removeClass("open").end().toggleClass("open")}function d(a){e();var b=a.children("ul");if(!b.length)return $();if(a.hasClass("open"))return c(a),$();var d=$(".aside"),f=i.app.layout.isFixed?parseInt(d.css("padding-top"),0):0,g=b.clone().appendTo(d);c(a);var h=a.position().top+f-j.scrollTop(),l=k.height();return g.addClass("nav-floating").css({position:i.app.layout.isFixed?"fixed":"absolute",top:h,bottom:g.outerHeight(!0)+h>l?0:"auto"}),g.on("mouseleave",function(){c(a),g.remove()}),g}function e(){$(".sidebar-subnav.nav-floating").remove()}function f(){return l.hasClass("touch")}function g(){return m.hasClass("aside-collapsed")}function h(){return k.width()<b.tablet}var i,j,k=$(a),l=$("html"),m=$("body");return{restrict:"EA",template:'<nav class="sidebar" ng-transclude></nav>',transclude:!0,replace:!0,link:function(a,b){i=a,j=b;var c=f()?"click":"mouseenter",k=$();j.on(c,".nav > li",function(){g()&&!h()&&(k.trigger("mouseleave"),k=d($(this)))}),a.$on("closeSidebarMenu",function(){e(),$(".sidebar li.open").removeClass("open")})}}}]),angular.module("core").directive("toggleFullscreen",function(){"use strict";return{restrict:"A",link:function(a,b){b.on("click",function(a){a.preventDefault(),screenfull.enabled?(screenfull.toggle(),screenfull.isFullscreen?$(this).children("em").removeClass("fa-expand").addClass("fa-compress"):$(this).children("em").removeClass("fa-compress").addClass("fa-expand")):$.error("Fullscreen not enabled")})}}}),angular.module("core").directive("toggleState",["toggleStateService",function(a){"use strict";return{restrict:"A",link:function(b,c,d){var e=$("body");$(c).on("click",function(b){b.preventDefault();var c=d.toggleState;c&&(e.hasClass(c)?(e.removeClass(c),d.noPersist||a.removeState(c)):(e.addClass(c),d.noPersist||a.addState(c)))})}}}]),angular.module("core").directive("fmWith",function(){"use strict";return{restrict:"A",scope:!0,controller:["$scope","$attrs","$parse",function(a,b,c){a.$parent.$watch(b.fmWith,function(){var d=a.$parent[b.fmWith];!function(b){for(var d in b)b.hasOwnProperty(d)&&Object.defineProperty(a,d,{enumerable:!0,configurable:!0,get:c(d).bind(a,b,a.$parent),set:c(d).assign.bind(a,b,a.$parent)})}(d)})}]}}),angular.module("core").factory("Account",["$resource",function(a){"use strict";return a("/api/public/accounts/:id",{id:"@id"},{changePassword:{method:"POST",url:"/api/public/accounts/:id/changepassword",params:{id:"@id"}}})}]),angular.module("core").factory("Company",["$resource",function(a){"use strict";return a("/api/public/companies/:id",{id:"@id"})}]),angular.module("core").factory("Invoice",["$resource",function(a){"use strict";return a("/api/public/invoices/:id",{id:"@id"},{preview:{method:"POST",url:"/api/public/invoices/preview",isArray:!1}})}]),angular.module("core").factory("NgTableParams",["ngTableParams",function(a){"use strict";return a}]),angular.module("core").factory("Project",["$resource",function(a){"use strict";return a("/api/public/projects/:id",{id:"@id"},{active:{method:"GET",url:"/api/public/projects/active",isArray:!0},hide:{method:"POST",url:"/api/public/projects/:id/hide",isArray:!1},unhide:{method:"POST",url:"/api/public/projects/:id/unhide",isArray:!1},changetasks:{method:"POST",url:"/api/public/projects/:id/changetasks",isArray:!1}})}]),angular.module("core").factory("Template",["$resource",function(a){"use strict";return a("/api/public/templates/:id",{id:"@id"},{active:{method:"GET",url:"/api/public/templates/active",isArray:!0},hide:{method:"POST",url:"/api/public/templates/:id/hide",isArray:!1},unhide:{method:"POST",url:"/api/public/templates/:id/unhide",isArray:!1}})}]),angular.module("core").factory("TimeRegistration",["$resource",function(a){"use strict";return a("/api/public/timeregistrations/:id",{id:"@id"},{search:{method:"GET",url:"/api/public/timeregistrations/search",isArray:!0},bydate:{method:"GET",url:"/api/public/timeregistrations/bydate/:date",params:{date:"@date"},isArray:!0},byrange:{method:"GET",url:"/api/public/timeregistrations/byrange/:from/:to",params:{from:"@from",to:"@to"},isArray:!0},uninvoiced:{method:"GET",url:"/api/public/timeregistrations/uninvoiced",isArray:!0},getinfoforperiod:{method:"GET",url:"/api/public/timeregistrations/getinfoforperiod/:from/:to",params:{from:"@from",to:"@to"}},getinfoforperiodpertask:{method:"GET",url:"/api/public/timeregistrations/getinfoforperiodpertask/:from/:to",params:{from:"@from",to:"@to"},isArray:!0},saveMultiple:{method:"POST",url:"/api/public/timeregistrations/multiple",isArray:!0}})}]),angular.module("core").factory("XLSXReader",["$q","$rootScope",function(a){"use strict";function b(a){var b={};return _.forEachRight(a.SheetNames,function(d){var e=a.Sheets[d];b[d]=c(e)}),b}function c(a){var b=XLSX.utils.decode_range(a["!ref"]),c=[],d=[];return _.forEachRight(_.range(b.s.r,b.e.r+1),function(e){var f=[];_.forEachRight(_.range(b.s.c,b.e.c+1),function(b){var c=XLSX.utils.encode_cell({c:b,r:e}),d=a[c];f[b]=d?d.v:void 0}),0===e?d=f:c[e-1]=f}),{header:d,data:c,name:a.name,col_size:b.e.c+1,row_size:b.e.r}}var d=function(a){angular.extend(this,a)};return d.readFile=function(c){var d=a.defer(),e=new FileReader;return e.onload=function(a){var c=a.target.result,e=XLSX.read(c,{type:"binary"});d.resolve(b(e))},e.readAsBinaryString(c),d.promise},d}]),angular.module("core").filter("formatdate",function(){"use strict";return function(a){return _.has(a,"year")&&_.has(a,"month")&&_.has(a,"day")?a.year+"-"+("00"+a.month).slice(-2)+"-"+("00"+a.day).slice(-2):"-"}}),angular.module("core").filter("formattime",function(){"use strict";return function(a){if(_.has(a,"hour")&&_.has(a,"minutes"))return("00"+a.hour).slice(-2)+":"+("00"+a.minutes).slice(-2);if(_.isNumber(a)){var b=Math.floor(a/60),c=Math.floor(a-60*b);return b>99?b+":"+("00"+c).slice(-2):("00"+b).slice(-2)+":"+("00"+c).slice(-2)}return"-"}}),angular.module("core").filter("moment",function(){"use strict";return function(a,b){return a.format(b)}}),angular.module("core").service("browser",function(){"use strict";var a,b,c=function(a){a=a.toLowerCase();var b=/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],c=/(ipad)/.exec(a)||/(iphone)/.exec(a)||/(android)/.exec(a)||/(windows phone)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/i.exec(a)||[];return{browser:b[3]||b[1]||"",version:b[2]||"0",platform:c[0]||""}};if(a=c(window.navigator.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version,b.versionNumber=parseInt(a.version)),a.platform&&(b[a.platform]=!0),(b.android||b.ipad||b.iphone||b["windows phone"])&&(b.mobile=!0),(b.cros||b.mac||b.linux||b.win)&&(b.desktop=!0),(b.chrome||b.opr||b.safari)&&(b.webkit=!0),b.rv){var d="msie";a.browser=d,b[d]=!0}if(b.opr){var e="opera";a.browser=e,b[e]=!0}if(b.safari&&b.android){var f="android";a.browser=f,b[f]=!0}return b.name=a.browser,b.platform=a.platform,b}),angular.module("core").service("navSearch",function(){"use strict";var a="form.navbar-form";return{toggle:function(){var b=$(a);b.toggleClass("open");var c=b.hasClass("open");b.find("input")[c?"focus":"blur"]()},dismiss:function(){$(a).removeClass("open").find('input[type="text"]').blur().val("")}}}),angular.module("core").service("toggleStateService",["$rootScope",function(a){"use strict";var b="toggleState",c={hasWord:function(a,b){return new RegExp("(^|\\s)"+b+"(\\s|$)").test(a)},addWord:function(a,b){return this.hasWord(a,b)?void 0:a+(a?" ":"")+b},removeWord:function(a,b){return this.hasWord(a,b)?a.replace(new RegExp("(^|\\s)*"+b+"(\\s|$)*","g"),""):void 0}};return{addState:function(d){var e=angular.fromJson(a.$storage[b]);e=e?c.addWord(e,d):d,a.$storage[b]=angular.toJson(e)},removeState:function(d){var e=a.$storage[b];e&&(e=c.removeWord(e,d),a.$storage[b]=angular.toJson(e))},restoreState:function(c){var d=angular.fromJson(a.$storage[b]);d&&c.addClass(d)}}}]),function(a,b,c){"use strict";var d=a("html"),e=a(b);a.support.transition=function(){var a=function(){var a,b=c.body||c.documentElement,d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in d)if(void 0!==b.style[a])return d[a]}();return a&&{end:a}}(),a.support.animation=function(){var a=function(){var a,b=c.body||c.documentElement,d={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(a in d)if(void 0!==b.style[a])return d[a]}();return a&&{end:a}}(),a.support.requestAnimationFrame=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.msRequestAnimationFrame||b.oRequestAnimationFrame||function(a){b.setTimeout(a,1e3/60)},a.support.touch="ontouchstart"in b&&navigator.userAgent.toLowerCase().match(/mobile|tablet/)||b.DocumentTouch&&document instanceof b.DocumentTouch||b.navigator.msPointerEnabled&&b.navigator.msMaxTouchPoints>0||b.navigator.pointerEnabled&&b.navigator.maxTouchPoints>0||!1,a.support.mutationobserver=b.MutationObserver||b.WebKitMutationObserver||b.MozMutationObserver||null,a.Utils={},a.Utils.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},a.Utils.removeCssRules=function(a){var b,c,d,e,f,g,h,i,j,k;a&&setTimeout(function(){try{for(k=document.styleSheets,e=0,h=k.length;h>e;e++){for(d=k[e],c=[],d.cssRules=d.cssRules,b=f=0,i=d.cssRules.length;i>f;b=++f)d.cssRules[b].type===CSSRule.STYLE_RULE&&a.test(d.cssRules[b].selectorText)&&c.unshift(b);for(g=0,j=c.length;j>g;g++)d.deleteRule(c[g])}}catch(l){}},0)},a.Utils.isInView=function(b,c){var d=a(b);if(!d.is(":visible"))return!1;var f=e.scrollLeft(),g=e.scrollTop(),h=d.offset(),i=h.left,j=h.top;return c=a.extend({topoffset:0,leftoffset:0},c),j+d.height()>=g&&j-c.topoffset<=g+e.height()&&i+d.width()>=f&&i-c.leftoffset<=f+e.width()?!0:!1},a.Utils.events={},a.Utils.events.click=a.support.touch?"tap":"click",a.langdirection="rtl"===d.attr("dir")?"right":"left",a(function(){if(a.support.mutationobserver){var b=new a.support.mutationobserver(a.Utils.debounce(function(){a(c).trigger("domready")},300));b.observe(document.body,{childList:!0,subtree:!0})}}),d.addClass(a.support.touch?"touch":"no-touch")}(jQuery,window,document),angular.module("crm").config(["$stateProvider",function(a){"use strict";a.state("app.companies",{url:"/crm/companies",templateUrl:"modules/crm/views/companies.html",controller:"CompaniesController",access:{requiredLogin:!0}})}]),angular.module("crm").controller("CompaniesController",["$scope","$modal","Company",function(a,b,c){"use strict";a.getAllCompanies=function(){a.companies=c.query()},a.openCompany=function(c){var d=b.open({templateUrl:"/modules/crm/views/editcompany.html",controller:"CompanyDialogController",resolve:{toUpdate:function(){return c}}});d.result.then(function(b){var c=_.find(a.companies,{id:b.id});c?angular.copy(b,c):a.companies.push(b)})}}]),angular.module("crm").controller("CompanyDialogController",["$scope","Company","toUpdate",function(a,b,c){"use strict";function d(b){a.isBusy=!0,a.message=b}function e(){a.isBusy=!1,a.message=""}a.originalCompany=c,a.newCompany=void 0===c,c=c||{},a.company={name:c.name,number:c.number,vatNumber:c.vatNumber,address:c.address?{line1:c.address.line1,line2:c.address.line2,postalcode:c.address.postalcode,city:c.address.city}:null},a.isBusy=!1,a.message="",a.ok=function(){d("Saving company...");var c=a.newCompany?{}:{id:a.originalCompany.id};b.save(c,a.company,function(b){e(),a.$close(b)},function(){d("An error occurred...")})},a.cancel=function(){a.$dismiss("cancel")}}]),angular.module("crm").controller("SearchCompanyDialogController",["$scope","Company",function(a,b){"use strict";a.companies=b.query(),a.ok=function(){a.$close(_.first(_.where(a.companies,function(b){return b.id===a.selectedCompany})))},a.cancel=function(){a.$dismiss("cancel")}}]),angular.module("invoice").config(["$stateProvider","$urlRouterProvider",function(a){"use strict";a.state("app.invoice_create",{url:"/invoice/create",templateUrl:"modules/invoice/views/create.html",controller:"CreateController",access:{requiredLogin:!0}}).state("app.invoice_overview",{url:"/invoice/overview/:from/:to",templateUrl:"modules/invoice/views/overview.html",controller:"OverviewController",access:{requiredLogin:!0},params:{from:function(){return moment().startOf("year").format("YYYYMMDD")},to:function(){return moment().endOf("year").format("YYYYMMDD")}}})}]),angular.module("invoice").controller("CreateController",["$scope","$state","$stateParams","$modal","$sce","Project","TimeRegistration","Template","Invoice",function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){l=[];for(var b=1;a>=b;b++)l[b]=!1}function k(a){for(var b in l)l[b]=!1;l[a]=!0}var l;a.init=function(){j(4),k(1)},a.active=function(a){return!!l[a]},f.query(function(b){a.projects=_.sortBy(b,["company.name","name"])}),a.templates=h.active(),a.search={project:null,from:null,to:null,invoiced:!1},a.searchTimeRegistrations=function(){a.loading=!0,a.includeAllTimeRegistrations=!1,g.search({project:a.search.project,from:a.search.from?moment(a.search.from,"YYYY-MM-DD").format("YYYYMMDD"):null,to:a.search.to?moment(a.search.to,"YYYY-MM-DD").format("YYYYMMDD"):null,invoiced:a.search.invoiced},function(b){a.loading=!1,a.searched=!0,a.timeRegistrations=_.sortBy(b,["data.numeric","from.numeric"])})},a.$watch("includeAllTimeRegistrations",function(b){a.timeRegistrations&&_.forEach(a.timeRegistrations,function(a){a.included=b})}),a.invoice={customer:{address:{}}},a.canGoto2=function(){return _.some(a.timeRegistrations,{included:!0})},a.gobackto2=function(){k(2)},a.goto2=function(){a.invoice.linkedTimeRegistrationIds=_.map(a.timeRegistrations,function(a){return a.id}),a.invoice.lines=_.map(_.groupBy(_.where(a.timeRegistrations,{included:!0}),function(a){return a.projectId+"-"+a.task}),function(b){var c=_.reduce(_.map(b,"totalMinutes"),function(a,b){return a+b.totalMinutes}),d=Math.round(c/60*100)/100,e=_.first(_.where(a.projects,function(a){return a.id===b[0].projectId})),f=e?_.first(_.where(e.tasks,function(a){return a.name===b[0].task})):null,g=f?parseInt(f.defaultRateInCents):0;return{description:e.name,quantity:d,vatPercentage:21,price:g/100,priceInCents:g}},0),k(2)},a.removeInvoiceLine=function(b){_.remove(a.invoice.lines,b)},a.addInvoiceLine=function(){a.invoice.lines.push({description:"",quantity:1,vatPercentage:21,price:0,priceInCents:0})},a.$watch("invoice.lines",function(a){_.forEach(a,function(a){a.priceInCents=Math.round(100*a.price),a.totalInCents=Math.round(a.quantity*a.priceInCents),a.total=a.totalInCents/100})},!0),a.goto3=function(){k(3)},a.gobackto3=function(){k(3)},a.$watch("invoice.templateId",function(b){var c=_.first(_.where(a.templates,function(a){return a.id===b}));a.invoice.template=c?c.content:""}),a.$watch("invoice.date",function(b){a.invoice.creditTerm=b?moment(b,"YYYY-MM-DD").add(30,"day").format("YYYY-MM-DD"):null}),a.searchCustomer=function(){var b=d.open({templateUrl:"/modules/crm/views/searchcompany.html",controller:"SearchCompanyDialogController"});b.result.then(function(b){b&&(a.invoice.customer.name=b.name,a.invoice.customer.vatNumber=b.vatNumber,a.invoice.customer.number=b.number,a.invoice.customer.address.line1=b.address.line1,a.invoice.customer.address.line2=b.address.line2,a.invoice.customer.address.postalcode=b.address.postalcode,a.invoice.customer.address.city=b.address.city)})},a.goto4=function(){a.loading=!0,i.preview(a.invoice,function(b){a.invoicePreview=b,a.loading=!1,a.previewUrl=e.trustAsResourceUrl("/render/#!/invoicepreview?invoice="+window.encodeURIComponent(JSON.stringify(b)))}),k(4)},a.create=function(){i.save(a.invoice)}}]),angular.module("project").config(["$stateProvider",function(a){"use strict";a.state("app.projects",{url:"/projects/overview",templateUrl:"modules/project/views/projects.html",controller:"ProjectsController",access:{requiredLogin:!0}})}]),angular.module("project").controller("ProjectDialogController",["$scope","Project","Company","toUpdate",function(a,b,c,d){"use strict";function e(b){a.isBusy=!0,a.message=b}function f(){a.isBusy=!1,a.message=""}a.originalProject=d,a.newProject=void 0===d,d=d||{},a.project={companyId:d.companyId||"",name:d.name||"",description:d.description||""},a.isBusy=!1,a.message="",a.companies=c.query(),a.ok=function(){e("Saving project...");var c=a.newProject?{}:{id:a.originalProject.id};b.save(c,a.project,function(b){f(),a.$close(b)},function(){e("An error occurred...")})},a.cancel=function(){a.$dismiss("cancel")}}]),angular.module("project").controller("ProjectsController",["$scope","$modal","Project",function(a,b,c){"use strict";a.getAllProjects=function(){a.projects=c.query()},a.openProject=function(c){var d=b.open({templateUrl:"/modules/project/views/editproject.html",controller:"ProjectDialogController",resolve:{toUpdate:function(){return c}}});d.result.then(function(b){var c=_.find(a.projects,{id:b.id});c?angular.copy(b,c):a.projects.push(b)})},a.openProjectTasks=function(c){var d=b.open({templateUrl:"/modules/project/views/projecttasksdialog.html",controller:"ProjectTasksDialogController",resolve:{toUpdate:function(){return c}}});d.result.then(function(b){var c=_.find(a.projects,{id:b.id});c&&angular.copy(b,c)})},a.hideProject=function(a){c.hide({id:a.id},function(){a.hidden=!0})},a.unhideProject=function(a){c.unhide({id:a.id},function(){a.hidden=!1})}}]),angular.module("project").controller("ProjectTasksDialogController",["$scope","Project","toUpdate",function(a,b,c){"use strict";function d(b){a.isBusy=!0,a.message=b}function e(){a.isBusy=!1,a.message=""}a.originalProject=c,c=c||{},a.project={tasks:_.map(c.tasks,function(a){return{name:a.name,defaultRateInCents:a.defaultRateInCents,defaultRate:a.defaultRateInCents?a.defaultRateInCents/100:a.defaultRateInCents}})},a.$watch("project.tasks",function(a){_.forEach(a,function(a){a.defaultRateInCents=Math.round(100*a.defaultRate)})},!0),a.isBusy=!1,a.message="",a.ok=function(){d("Saving project..."),b.changetasks({id:a.originalProject.id},a.project.tasks,function(b){e(),a.$close(b)},function(){d("An error occurred...")})},a.cancel=function(){a.$dismiss("cancel")}}]),angular.module("settings").config(["$stateProvider",function(a){"use strict";a.state("app.settings_templates",{url:"/settings/templates",templateUrl:"modules/settings/views/templates.html",controller:"TemplatesController",access:{requiredLogin:!0}})}]),angular.module("settings").controller("TemplatesController",["$scope","Template",function(a,b){"use strict";a.getAllTemplates=function(){a.templates=b.query()},a.openTemplate=function(b){a.template=b||{},a.newTemplate=void 0===b},a.newTemplate=!0,a.saveTemplate=function(){var c=a.newTemplate?{}:{id:a.template.id};b.save(c,a.template,function(b){a.newTemplate&&(a.templates.push(b),a.template=b,a.newTemplate=!1)},function(a){alert(a)})}}]),angular.module("time").config(["$stateProvider","$urlRouterProvider",function(a){"use strict";a.state("app.time_overview",{url:"/time/overview/:date",templateUrl:"modules/time/views/overview.html",controller:"OverviewController",access:{requiredLogin:!0},params:{date:function(){return moment().format("YYYYMMDD")}}}).state("app.time_report",{url:"/time/report/:from/:to",templateUrl:"modules/time/views/report.html",controller:"ReportController",access:{requiredLogin:!0},params:{from:function(){return moment().startOf("month").format("YYYYMMDD")},to:function(){return moment().endOf("month").format("YYYYMMDD")}}}).state("app.time_import",{url:"/time/import",templateUrl:"modules/time/views/import.html",controller:"ImportController",resolve:ApplicationConfiguration.resolve("lib/js-xlsx/dist/xlsx.core.min.js"),access:{requiredLogin:!0}}).state("app.time_export",{url:"/time/export/:from/:to",templateUrl:"modules/time/views/export.html",controller:"ExportController",access:{requiredLogin:!0},params:{from:function(){return moment().startOf("month").format("YYYYMMDD")},to:function(){return moment().endOf("month").format("YYYYMMDD")}}})}]),angular.module("time").controller("ExportController",["$scope","$state","$stateParams","TimeRegistration",function(a,b,c,d){"use strict";a.from=moment(c.from,"YYYYMMDD"),a.to=moment(c.to,"YYYYMMDD"),a.hasTimeRegistrations=!1,a.loading=!1,a.from=moment(c.from,"YYYYMMDD"),a.to=moment(c.to,"YYYYMMDD"),a.thisWeek=moment().day(1).format("YYYYMMDD")+"/"+moment().day(7).format("YYYYMMDD"),a.lastWeek=moment().day(1).subtract(7,"days").format("YYYYMMDD")+"/"+moment().day(7).subtract(7,"days").format("YYYYMMDD"),a.thisMonth=moment().set("date",1).format("YYYYMMDD")+"/"+moment().set("date",moment().daysInMonth()).format("YYYYMMDD"),a.lastMonth=moment().set("date",1).subtract(1,"months").format("YYYYMMDD")+"/"+moment().subtract(1,"months").set("date",moment().subtract(1,"months").daysInMonth()).format("YYYYMMDD"),a.thisYear=moment().set("month",0).set("date",1).format("YYYYMMDD")+"/"+moment().set("month",11).set("date",31).format("YYYYMMDD"),a.lastYear=moment().set("month",0).set("date",1).subtract(1,"years").format("YYYYMMDD")+"/"+moment().set("month",11).set("date",31).subtract(1,"years").format("YYYYMMDD"),a.$watch("from",function(){a.displayFrom=a.from.format("YYYY-MM-DD")
}),a.$watch("to",function(){a.displayTo=a.to.format("YYYY-MM-DD")}),a.changeFrom=function(b,c){a.from=moment(b,c)},a.changeTo=function(b,c){a.to=moment(b,c)},a.applyDate=function(){b.go("app.time_export",{from:a.from.format("YYYYMMDD"),to:a.to.format("YYYYMMDD")},{location:"replace"})},a.refresh=function(){a.loading=!0,d.byrange({from:a.from.format("YYYYMMDD"),to:a.to.format("YYYYMMDD")},function(b){var c=_.groupBy(b,function(a){return a.date.numeric});a.timeRegistrations=_.sortBy(_.map(c,function(a){return{date:_.first(a).date,items:a}}),function(a){return a.date.numeric}),a.hasTimeRegistrations=a.timeRegistrations.length>0,a.loading=!1})}}]),angular.module("time").controller("ImportController",["$scope","$state","XLSXReader","NgTableParams","$filter","Project","TimeRegistration",function(a,b,c,d,e,f,g){"use strict";function h(a){l=[];for(var b=1;a>=b;b++)l[b]=!1}function i(a){for(var b in l)l[b]=!1;l[a]=!0}function j(a){return parseInt(a.replace(/-/g,""),10)}function k(a){return parseInt(a.replace(":",""),10)}var l;a.init=function(){h(4),i(1)},a.active=function(a){return!!l[a]},f.active(function(b){var c=[],d=0;_.forEach(b,function(a){_.forEach(a.tasks,function(b){c.push({project:a,task:b,display:a.name+" - "+b.name,id:d++})})}),a.tasks=c}),a.fileChanged=function(b){a.excelSheets=[],a.excelFile=b[0],c.readFile(a.excelFile,a.showPreview).then(function(b){a.excelSheets=b,i(2)})},a.selectedSheetName=void 0,a.selectedSheet=void 0,a.goto3=function(){a.selectedSheet=a.excelSheets[a.selectedSheetName];for(var b=[],c=0;c<a.selectedSheet.header.length;c++)b.push({key:c,value:a.selectedSheet.header[c]});a.selectedSheetHeader=b,i(3)},a.canGoto3=function(){return null!==a.selectedSheetName},a.goto4=function(){a.groupedRows=_.groupBy(a.selectedSheet.data,function(b){return b[a.selectedProjectColumn]+" - "+b[a.selectedTaskColumn]}),a.projectsInExcelSheet=_.map(a.groupedRows,function(b){return{project:b[0][a.selectedProjectColumn],task:b[0][a.selectedTaskColumn],display:b[0][a.selectedProjectColumn]+" - "+b[0][a.selectedTaskColumn]}}),i(4)},a.canGoto4=function(){return null!==a.selectedProjectColumn&&null!==a.selectedTaskColumn&&null!==a.selectedDateColumn&&null!==a.selectedFromColumn&&null!==a.selectedToColumn&&null!==a.selectedDescriptionColumn},a.goto5=function(){i(5)},a.canGoto5=function(){return _.every(a.projectsInExcelSheet,function(a){return null!==a.mappedProjectAndTask})},a.importing=!1,a["import"]=function(){var b=[];a.importing=!0,_.forEach(a.groupedRows,function(c){var d=_.first(_.where(a.projectsInExcelSheet,function(b){return b.project===c[0][a.selectedProjectColumn]&&b.task===c[0][a.selectedTaskColumn]})).mappedProjectAndTask,e=a.tasks[d].project,f=a.tasks[d].task;_.forEach(c,function(c){b.push({companyId:e.companyId,projectId:e.id,task:f.name,description:c[a.selectedDescriptionColumn],date:j(c[a.selectedDateColumn]),from:k(c[a.selectedFromColumn]),to:k(c[a.selectedToColumn]),billable:f.billable})})}),g.saveMultiple(b,function(b){a.importing=!1,a.timeRegistrationsImported=b,a.summaryTableParams.count(10),i(6)},function(){a.importing=!1})},a.summaryTableParams=new d({page:1,count:1},{getData:function(b,c){if(a.timeRegistrationsImported){var d=c.filter()?e("filter")(a.timeRegistrationsImported,c.filter()):a.timeRegistrationsImported,f=c.sorting()?e("orderBy")(d,c.orderBy()):a.timeRegistrationsImported;c.total(f.length),b.resolve(f.slice((c.page()-1)*c.count(),c.page()*c.count()))}}})}]),angular.module("time").controller("OverviewController",["$scope","$modal","$location","$state","$stateParams","TimeRegistration",function(a,b,c,d,e,f){"use strict";a.date=moment(e.date,"YYYYMMDD"),a.hasTimeRegistrations=!1,a.$watch("date",function(){a.displayDate=a.date.format("YYYY-MM-DD")}),a.nextDate=function(){d.go("app.time_overview",{date:moment(a.date.add(1,"days")).format("YYYYMMDD")},{location:"replace"})},a.previousDate=function(){d.go("app.time_overview",{date:a.date.subtract(1,"days").format("YYYYMMDD")},{location:"replace"})},a.changeDate=function(a,b){d.go("app.time_overview",{date:moment(a,b).format("YYYYMMDD")},{location:"replace"})},a.refresh=function(){f.bydate({date:a.date.format("YYYYMMDD")},function(b){a.hasTimeRegistrations=b.length>0,a.timeRegistrations=_.sortBy(b,function(a){return a.from.numeric})})},a.openTimeRegistration=function(c){var d=b.open({templateUrl:"/modules/time/views/timeregistrationdialog.html",controller:"TimeRegistrationDialogController",size:"lg",resolve:{toUpdate:function(){return c},date:function(){return a.date.format("YYYYMMDD")}}});d.result.then(function(b){if(b.deleted)_.remove(a.timeRegistrations,function(a){return a.id===b.deleted});else{var c=_.find(a.timeRegistrations,{id:b.id});c?angular.copy(b,c):a.timeRegistrations.push(b)}a.hasTimeRegistrations=a.timeRegistrations.length>0})}}]),angular.module("time").controller("ReportController",["$scope","$location","$state","$stateParams","TimeRegistration",function(a,b,c,d,e){"use strict";if(a.from=moment(d.from,"YYYYMMDD"),a.to=moment(d.to,"YYYYMMDD"),1===a.from.date()&&0===a.from.month()&&31===a.to.date()&&11===a.to.month()&&a.from.year()===a.to.year())a.title=a.from.format("YYYY"),a.previousFrom=moment(a.from).subtract(1,"year"),a.previousTo=moment(a.to).subtract(1,"year"),a.nextFrom=moment(a.from).add(1,"year"),a.nextTo=moment(a.to).add(1,"year");else if(1===a.from.date()&&moment(a.from).endOf("month").date()===a.to.date()&&a.from.month()===a.to.month()&&a.from.year()===a.to.year())a.title=a.from.format("MMMM YYYY"),a.previousFrom=moment(a.from).subtract(1,"month").startOf("month"),a.previousTo=moment(a.from).subtract(1,"month").endOf("month"),a.nextFrom=moment(a.from).add(1,"month").startOf("month"),a.nextTo=moment(a.from).add(1,"month").endOf("month");else{a.title=a.from.format("YYYY-MM-DD")+" - "+a.to.format("YYYY-MM-DD");var f=a.to.diff(a.from,"days")+1;a.previousFrom=moment(a.from).subtract(f,"days"),a.previousTo=moment(a.to).subtract(f,"days"),a.nextFrom=moment(a.from).add(f,"days"),a.nextTo=moment(a.to).add(f,"days")}a.weekStart=moment().startOf("isoWeek").format("YYYYMMDD"),a.weekEnd=moment().endOf("isoWeek").format("YYYYMMDD"),a.monthStart=moment().startOf("month").format("YYYYMMDD"),a.monthEnd=moment().endOf("month").format("YYYYMMDD"),a.yearStart=moment().startOf("year").format("YYYYMMDD"),a.yearEnd=moment().endOf("year").format("YYYYMMDD"),a.previous=function(){c.go("app.time_report",{from:a.previousFrom.format("YYYYMMDD"),to:a.previousTo.format("YYYYMMDD")},{location:"replace"})},a.next=function(){c.go("app.time_report",{from:a.nextFrom.format("YYYYMMDD"),to:a.nextTo.format("YYYYMMDD")},{location:"replace"})},a.refresh=function(){a.loading=!0,e.getinfoforperiod({from:a.from.format("YYYYMMDD"),to:a.to.format("YYYYMMDD")},function(b){a.summary=b,a.billableUnbillableGraph=[{label:"Billable",data:a.summary.billableMinutes,color:"#7266BA"},{label:"Unbillable",data:a.summary.unBillableMinutes,color:"#5D9CEC"}],a.hasHours=a.summary.unBillableMinutes||a.summary.billableMinutes?!0:!1,a.loading=!1}),e.getinfoforperiodpertask({from:a.from.format("YYYYMMDD"),to:a.to.format("YYYYMMDD")},function(b){var c=_.groupBy(b,function(a){return JSON.stringify({c:a.companyId,p:a.projectId})});a.infoPerProject=_.map(c,function(a){return{companyId:a[0].companyId,company:a[0].company,projectId:a[0].projectId,project:a[0].project,tasks:a}})})}}]),angular.module("time").controller("TimeRegistrationDialogController",["$scope","Project","TimeRegistration","toUpdate","date",function(a,b,c,d,e){"use strict";function f(a){var b=Math.floor(a/100),c=Math.floor(a-100*b);return("00"+b).slice(-2)+":"+("00"+c).slice(-2)}function g(b){a.isBusy=!0,a.message=b}function h(){a.isBusy=!1,a.message=""}function i(a){return parseInt(a.replace(":",""),10)}a.$watch("timeRegistration.company",function(b,c){c&&b&&c.id!==b.id&&(a.timeRegistration.project=null,a.timeRegistration.task=null)}),a.$watch("timeRegistration.project",function(b,c){c&&b&&c.id!==b.id&&(a.timeRegistration.task=null)}),a.$watch("timeRegistration.task",function(){a.newTimeRegistration&&a.timeRegistration.task&&(a.timeRegistration.billable=a.timeRegistration.task.defaultRateInCents>0)}),a.isBusy=!1,a.message="",a.originalTimeRegistration=d,a.newTimeRegistration=void 0===d,d=d||{},a.timeRegistration={company:null,project:null,task:null,billable:d.billable||!1,description:d.description||"",from:d.from?f(d.from.numeric):"",to:d.to?f(d.to.numeric):""},a.projects=b.active(function(){a.companies=_.map(_.groupBy(a.projects,function(a){return a.companyId}),function(a){return{id:a[0].companyId,name:a[0].company.name,projects:a}}),d.companyId&&(a.timeRegistration.company=_.first(_.where(a.companies,{id:d.companyId}))),d.projectId&&a.timeRegistration.company&&(a.timeRegistration.project=_.first(_.where(a.timeRegistration.company.projects,{id:d.projectId}))),d.task&&a.timeRegistration.project&&(a.timeRegistration.task=_.first(_.where(a.timeRegistration.project.tasks,{name:d.task}))),a.projectEditable=a.newTimeRegistration?!0:a.timeRegistration.task?!0:!1}),a.ok=function(){g("Saving time registration...");var b=a.newTimeRegistration?{}:{id:a.originalTimeRegistration.id};c.save(b,{companyId:a.timeRegistration.company.id,projectId:a.timeRegistration.project.id,task:a.timeRegistration.task.name,description:a.timeRegistration.description,billable:a.timeRegistration.billable,date:e,from:i(a.timeRegistration.from),to:i(a.timeRegistration.to)},function(b){h(),a.$close(b)},function(){g("An error occurred...")})},a["delete"]=function(){g("Deleting time registration...");a.newTimeRegistration?{}:{id:a.originalTimeRegistration.id};c["delete"]({id:a.originalTimeRegistration.id},function(b){h(),a.$close(b)},function(){g("An error occurred...")})},a.cancel=function(){a.$dismiss("cancel")}}]);